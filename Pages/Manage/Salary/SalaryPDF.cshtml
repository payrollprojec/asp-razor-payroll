@page
@model PayrollAppRazorPages.Pages.Manage.Salary.SalaryPDFModel
@{
    ViewData["Title"] = "SalaryPDF";
    Layout = "_Layout";
}

<br /><hr style="height:2px; color:black; background-color:black;" /><br />
<h1 style="text-align: center;">V3X Malaysia Sdn. Bhd.</h1>
<p style="text-align: center;">79A, Jalan Pulai 23, Taman Pulai Utama,</p>
<p style="text-align: center;">81300 Skudai, Johor, Malaysia</p>
<br /><hr style="height:2px; color:black; background-color:black;" />
<br />

<style>
    .slip {
        font-family: Consolas, monospace;
        border: solid 1px;
        padding: 20px;
    }

    span.text-danger {
        display: block;
    }
</style>
<div class="slip container-fluid">
    <div class="row">
        <div class="col"><h4>PAYSLIP FOR @Model.SelectedDate.ToUpper()</h4></div>
        <div class="col align-self-center text-right">
            <h4 class="small">Generated on @Model.StaffSalary.DateCreated.ToShortDateString()</h4>
        </div>
    </div>

    <div class="row border-bottom border-top">
        <div class="col border-right">

            <br /><b>Employee Details</b><br />

            @Html.DisplayNameFor(model => model.applicationUser.FullName)&nbsp;&nbsp;&nbsp;&nbsp;:
            @Html.DisplayFor(model => model.applicationUser.FullName)
            <br />

            @Html.DisplayNameFor(model => model.applicationUser.ICNo)&nbsp;&nbsp;:
            @Html.DisplayFor(model => model.applicationUser.ICNo)
            <br />

            @Html.DisplayNameFor(model => model.applicationUser.Email)&nbsp;&nbsp;&nbsp;:
            @Html.DisplayFor(model => model.applicationUser.Email)
            <br />
            @Html.DisplayNameFor(model => model.applicationUser.StaffData.EPFNo)&nbsp;&nbsp;:
            @Html.DisplayFor(model => model.applicationUser.StaffData.EPFNo)
            <br />

            @Html.DisplayNameFor(model => model.applicationUser.StaffData.SocsoNo):
            @Html.DisplayFor(model => model.applicationUser.StaffData.SocsoNo)
            <br />
            @Html.DisplayNameFor(model => model.applicationUser.StaffData.TaxNo)&nbsp;&nbsp;:
            @Html.DisplayFor(model => model.applicationUser.StaffData.TaxNo)
            <br />
        </div>
        <div class="col">
            @{
                Dictionary<string, int> dict = new Dictionary<string, int>();
                dict.Add("Present", 0);
                dict.Add("Absent", 0);
                dict.Add("Leave", 0);
                dict.Add("Sick", 0);

                foreach (var item in Model.UserAttendance)
                {
                    dict[item.AttendanceStatus.Status] += 1;
                }
            }
            <br /><b>Attendance Record</b>
            <br />
            Absent: @dict["Absent"]
            <br />
            Leave : @dict["Leave"]
            <br />
            Sick &nbsp;: @dict["Sick"]
        </div>
    </div>
    <div class="row">

        <div class="col border-right">
            <br /><b>Earning</b>
            <div>
                <label asp-for="StaffSalary.BasicSalary"></label>&nbsp;&nbsp;&nbsp;: RM
                @Html.DisplayFor(model => model.StaffSalary.BasicSalary)
            </div>
            <div>
                <label asp-for="StaffSalary.Allowances"></label>: RM
                @Html.DisplayFor(model => model.StaffSalary.Allowances)
            </div>
            <div>
                <label asp-for="StaffSalary.Bonus"></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM
                @Html.DisplayFor(model => model.StaffSalary.Bonus)
            </div>
            <div>
                <label asp-for="StaffSalary.AdvSalary">Adv. Salary&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.AdvSalaryPlus)
            </div>
        </div>
        <div class="col">
            <br /><b>Deduction</b>
            <div>
                <label asp-for="StaffSalary.EPF">EPF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.EPF)
            </div>
            <div>
                <label asp-for="StaffSalary.SocsoRm">SOCSO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.SocsoRm)
            </div>
            <div>
                <label asp-for="StaffSalary.EIS">EIS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.EIS)
            </div>
            <div>
                <label asp-for="StaffSalary.Tax">TAX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.Tax)
            </div>
            <div>
                <label asp-for="StaffSalary.AdvSalary">Adv. Salary: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.AdvSalary)
            </div>
            <div class="form-group">
                @{
                    var absent = Model.StaffSalary.BasicSalary / Model.WeekdaysCount * dict["Absent"];
                }
                <label>Absent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM</label>
                <span>@absent.ToString("0.00")</span> (@dict["Absent"] days)
            </div>
        </div>
    </div>
    <div class="row border-bottom align-items-end">

        <div class="col border-right">
            @{
                var totalEarn = Model.StaffSalary.BasicSalary + Model.StaffSalary.Allowances + Model.StaffSalary.Bonus + Model.StaffSalary.AdvSalaryPlus;
                var totalDeduct = Model.StaffSalary.EPF + Model.StaffSalary.SocsoRm + Model.StaffSalary.EIS + Model.StaffSalary.Tax + Model.StaffSalary.AdvSalary + absent;

                var net = totalEarn - totalDeduct;
            }
            Total Earning: RM @totalEarn.ToString("0.00")
            <br />
            Net Pay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM @net.ToString("0.00")
            <br />
        </div>
        <div class="col">
            Total Deduction: RM @totalDeduct.ToString("0.00")
        </div>

    </div>
    <div class="row border-bottom">
        <div class="col border-right">
            <br />
            <b>Employer Contribution</b>
            <div>
                <label asp-for="StaffSalary.EREPF">EPF&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.EREPF)
            </div>
            <div>
                <label asp-for="StaffSalary.ERSocsoRm">SOCSO: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.ERSocsoRm)
            </div>
            <div>
                <label asp-for="StaffSalary.EREIS">EIS&nbsp;&nbsp;: RM</label>
                @Html.DisplayFor(model => model.StaffSalary.EREIS)
            </div>
        </div>
        <div class="col">
            <br />
            <b>Year Summary (inc @Model.SelectedDate)</b><br />
            Net Pay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM @Html.DisplayFor(model => model.summary.net)<br />
            E'E / E'R EPF &nbsp;: RM @Html.DisplayFor(model => model.summary.epf) / @Html.DisplayFor(model => model.summary.erepf)<br />
            E'E / E'R SOCSO: RM @Html.DisplayFor(model => model.summary.socso) / @Html.DisplayFor(model => model.summary.ersocso)<br />
            E'E / E'R EIS &nbsp;: RM @Html.DisplayFor(model => model.summary.eis) / @Html.DisplayFor(model => model.summary.ereis)<br />
            TAX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: RM @Model.summary.tax<br />
        </div>
    </div>
    <br />
</div>